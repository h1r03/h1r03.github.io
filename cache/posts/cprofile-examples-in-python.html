
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Goal">Goal<a class="anchor-link" href="#Goal">&#182;</a></h1><p>This post aims to introduce how to use <code>cProfile</code> to measure the running time for each statement and find the bottleneck of your program.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Libraries">Libraries<a class="anchor-link" href="#Libraries">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">cProfile</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Define-your-function">Define your function<a class="anchor-link" href="#Define-your-function">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="define-your-sub-functions">define your sub functions<a class="anchor-link" href="#define-your-sub-functions">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">linear_func</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">quad_func</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">pass</span>

    <span class="k">return</span>

<span class="k">def</span> <span class="nf">exp_func</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">exp_func</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">exp_func</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">main_func</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">linear_func</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">quad_func</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">exp_func</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Profile-the-main-function">Profile the main function<a class="anchor-link" href="#Profile-the-main-function">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cProfile</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;main_func(n=20)&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>         21897 function calls (7 primitive calls) in 0.006 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 &lt;ipython-input-37-393400eb079b&gt;:1(linear_func)
  21891/1    0.006    0.000    0.006    0.006 &lt;ipython-input-37-393400eb079b&gt;:13(exp_func)
        1    0.000    0.000    0.000    0.000 &lt;ipython-input-37-393400eb079b&gt;:6(quad_func)
        1    0.000    0.000    0.006    0.006 &lt;ipython-input-38-1333493d3326&gt;:1(main_func)
        1    0.000    0.000    0.006    0.006 &lt;string&gt;:1(&lt;module&gt;)
        1    0.000    0.000    0.006    0.006 {built-in method builtins.exec}
        1    0.000    0.000    0.000    0.000 {method &#39;disable&#39; of &#39;_lsprof.Profiler&#39; objects}


</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="How-to-read-the-result">How to read the result<a class="anchor-link" href="#How-to-read-the-result">&#182;</a></h1><ul>
<li><strong>ncalls</strong> is the number of <strong>calls</strong>.</li>
<li><strong>tottime</strong> is a <strong>tot</strong>al of the <strong>time</strong> spent.</li>
<li><strong>percall</strong> is the average time for each call, i.e., tottime divided by ncalls</li>
<li><strong>cumtime</strong> is the <strong>cum</strong>ulative <strong>time</strong> spent.</li>
<li>(2nd) <strong>percall</strong>  is the quotient of cumtime divided by primitive calls</li>
<li><strong>filename:lineno(function)</strong> indicates the information about the function with the format "{file name}:{line number}{function name}"</li>
</ul>

</div>
</div>
</div>
 

